var _0xed6f=["maxRecursion","initials","?","defaultReplies","...","preSub","preSubs","personSub","personSubs","synonymSub","synonyms","rules","length","push","abbreviations","reset","prototype","lastReply","variables","getInitial","transform","replace","_splitSentences","split",""," ","_tokenize","\\b","\\.","gi","?.",".","_transformSentence","Too much recursion","log","default","matchInput","matchException","isMatchLastReplyRequired","matchLastReply","matchRequiredVariables","set","reply","retry","random","_replaceCaptures","toLowerCase","\\(","\\)","g","varRx","_replaceVariables","match","string","_getRandom","floor","inputRxs","input","i","exceptRxs","except","lastRxs","last","variableRxs","hasOwnProperty","indexOf","not_set","matchVariable","/not_set/","_match","exec","pairs","originalRx","replacement","commonRx","\\b(","|","join",")\\b","(?=a)b","lastIndex","substring","test","\\(%","(",")","^","\\","(\\b|$)","$","(?=([^a-zà-ü]|$))"];function ArletBot(e){if(this.maxRecursion=5,this.initials="?",e.initials&&(this.initials=e.initials),this.defaultReplies=["..."],e.defaultReplies&&(this.defaultReplies=e.defaultReplies),this.preSub=new ArletMultiPassSub(e.preSubs),this.personSub=new ArletSinglePassSub(e.personSubs),this.synonymSub=new ArletSynonymSub(e.synonyms),this.rules=[],e.rules)for(var t=0;t<e.rules.length;t++)this.rules.push(new ArletRule(e.rules[t],this.synonymSub));this.abbreviations=[],e.abbreviations&&(this.abbreviations=e.abbreviations),this.reset()}function ArletRule(e,t){if(this[_0xed6f[56]]=[],e[_0xed6f[57]])for(var r=0;r<e[_0xed6f[57]].length;r++){var i=e[_0xed6f[57]][r];i=t.replace(i);var f=new RegExp(delimitPattern(i),_0xed6f[58]);this[_0xed6f[56]].push(f)}if(this[_0xed6f[59]]=[],e[_0xed6f[60]])for(r=0;r<e[_0xed6f[60]].length;r++)i=e[_0xed6f[60]][r],i=t.replace(i),f=new RegExp(delimitPattern(i),_0xed6f[58]),this[_0xed6f[59]].push(f);if(this[_0xed6f[43]]=[],e[_0xed6f[43]]&&(this[_0xed6f[43]]=e[_0xed6f[43]]),this[_0xed6f[61]]=[],e[_0xed6f[62]])for(r=0;r<e[_0xed6f[62]].length;r++)i=e[_0xed6f[62]][r],i=t.replace(i),this[_0xed6f[61]].push(new RegExp(delimitPattern(i),_0xed6f[58]));for(t in this[_0xed6f[63]]={},e)if(e[_0xed6f[64]](t)&&-1===[_0xed6f[57],_0xed6f[60],_0xed6f[62],_0xed6f[42],_0xed6f[43],_0xed6f[41]][_0xed6f[65]](t)){var s=t;for(this[_0xed6f[63]][s]=[],r=0;r<e[s].length;r++)(i=e[s][r])===_0xed6f[24]?this[_0xed6f[63]][s].push(new RegExp(_0xed6f[66])):(i=t.replace(i),this[_0xed6f[63]][s].push(new RegExp(delimitPattern(i),_0xed6f[58])))}this[_0xed6f[42]]=[],e[_0xed6f[42]]&&(this[_0xed6f[42]]=e[_0xed6f[42]]),this[_0xed6f[41]]={},e[_0xed6f[41]]&&(this[_0xed6f[41]]=e[_0xed6f[41]])}function ArletMultiPassSub(e){if(this.pairs=[],e)for(var t=0;t<e.length;t+=2){var r=new Object;r[_0xed6f[72]]=new RegExp(delimitPattern(e[t]),_0xed6f[58]),r[_0xed6f[73]]=e[t+1],this.pairs.push(r)}}function ArletSinglePassSub(e){this.pairs=[];var t=[];if(e)for(var r=0;r<e.length;r+=2){var i=new Object,f=_0xed6f[27],s=_0xed6f[27];i[_0xed6f[72]]=new RegExp(f+e[r]+s),i[_0xed6f[73]]=e[r+1],this.pairs.push(i),t.push(e[r])}t.length?this[_0xed6f[74]]=new RegExp(_0xed6f[75]+t[_0xed6f[77]](_0xed6f[76])+_0xed6f[78],_0xed6f[29]):this[_0xed6f[74]]=new RegExp(_0xed6f[79])}function ArletSynonymSub(e){var t;if(this.pairs=[],e)for(t in e)if(e[_0xed6f[64]](t)){var r=new Object;r[_0xed6f[72]]=new RegExp(_0xed6f[83]+t+_0xed6f[48],_0xed6f[49]),r[_0xed6f[73]]=_0xed6f[84]+e[t][_0xed6f[77]](_0xed6f[76])+_0xed6f[85],this.pairs.push(r)}this[_0xed6f[74]]=new RegExp(/\(%([\w\-]+)\)/)}function delimitPattern(e){var t=_0xed6f[27];e.length>0&&e[0]===_0xed6f[86]&&(t=_0xed6f[24]),e.length>1&&e[0]===_0xed6f[87]&&e[1]===_0xed6f[2]&&(t=_0xed6f[24]);var r=_0xed6f[88];return e.length>0&&e[e.length-1]===_0xed6f[89]?r=_0xed6f[24]:e.match(/[\u00E0-\u00FC]\)?$/i)&&(r=_0xed6f[90]),t+e+r}ArletBot.prototype.reset=function(){this.lastReply=void 0,this.variables={}},ArletBot.prototype.getInitial=function(){return this.lastReply=this._getRandom(this.initials),this.lastReply},ArletBot.prototype.transform=function(e){e=this.preSub.replace(e);for(var t=this._splitSentences(e),r=new Array,i=0;i<t.length;i++){var f=this._transformSentence(t[i],0);f&&r.push(f)}return r.length?this.lastReply=r[r.length-1]:this.lastReply=this._getRandom(botData.defaultReplies),this.lastReply},ArletBot.prototype._splitSentences=function(e){for(var t=(e=this._tokenize(e))[_0xed6f[23]](/\./),r=[],i=0;i<t.length;i++){var f=t[i].replace(/^\s+/,_0xed6f[24]);(f=(f=(f=f.replace(/\s+$/,_0xed6f[24])).replace(/\s+\?/g,_0xed6f[2])).replace(/\s\s+/g,_0xed6f[25]))&&r.push(f)}return r},ArletBot.prototype[_0xed6f[26]]=function(e){for(var t=0;t<this.abbreviations.length;t++){var r=_0xed6f[27]+this.abbreviations[t].replace(/\./g,_0xed6f[28]),i=this.abbreviations[t].replace(/\./g,_0xed6f[24]);e=e.replace(new RegExp(r,_0xed6f[29]),i)}return(e=(e=e.replace(/\?+/g,_0xed6f[30])).replace(/,/g,_0xed6f[25])).replace(/[.;!\u00c2\u00bf\u00c2\u00a1]+/g,_0xed6f[31])},ArletBot.prototype[_0xed6f[32]]=function(e,t){if(!(t>=this.maxRecursion)){var r;if(e===_0xed6f[35])return r;for(var i=0;i<this.rules.length;i++){var f=this.rules[i],s=f[_0xed6f[36]](e);if(s){if(f[_0xed6f[37]](e))continue;if(f[_0xed6f[38]]()&&!f[_0xed6f[39]](this.lastReply))continue;if(!f[_0xed6f[40]](this.variables))continue;var n,a;if(f[_0xed6f[41]])for(n in f[_0xed6f[41]])this.variables[n]=this._replaceCaptures(s,f[_0xed6f[41]][n],!0);if(f[_0xed6f[42]].length?(a=_0xed6f[42],f[_0xed6f[43]].length&&Math[_0xed6f[44]]()>f[_0xed6f[42]].length/(f[_0xed6f[42]].length+f[_0xed6f[43]].length)&&(a=_0xed6f[43])):f[_0xed6f[43]].length&&(a=_0xed6f[43]),a===_0xed6f[42])return r=this._getRandom(f[_0xed6f[42]]),r=this._replaceCaptures(s,r,!0),this._replaceVariables(r);if(a===_0xed6f[43])return e=this._getRandom(f[_0xed6f[43]]),e=this._replaceCaptures(s,e),this._transformSentence(e,++t)}}return r}console[_0xed6f[34]](_0xed6f[33])},ArletBot.prototype[_0xed6f[45]]=function(e,t,r){for(var i=1;i<e.length;i++){var f=e[i];f&&(f=f[_0xed6f[46]](),r&&(f=this.personSub.replace(f)),t=t.replace(new RegExp(_0xed6f[47]+i+_0xed6f[48],_0xed6f[49]),f))}return t},ArletBot.prototype[_0xed6f[50]]=/\(@([\w\-]+)\)/,ArletBot.prototype[_0xed6f[51]]=function(e){for(var t=e.match(this[_0xed6f[50]]);t;){var r=this.variables[t[1]];typeof r!==_0xed6f[53]&&(r=_0xed6f[24]),t=(e=e.replace(this[_0xed6f[50]],r)).match(this[_0xed6f[50]])}return e},ArletBot.prototype[_0xed6f[54]]=function(e){return e[Math[_0xed6f[55]](Math[_0xed6f[44]]()*e.length)]},ArletRule.prototype[_0xed6f[36]]=function(e){return this._match(this[_0xed6f[56]],e)},ArletRule.prototype[_0xed6f[37]]=function(e){return this._match(this[_0xed6f[59]],e)},ArletRule.prototype[_0xed6f[39]]=function(e){return this._match(this[_0xed6f[61]],e)},ArletRule.prototype[_0xed6f[38]]=function(e){return this[_0xed6f[61]].length>0},ArletRule.prototype[_0xed6f[67]]=function(e,t){return this._match(this[_0xed6f[63]][e],t)},ArletRule.prototype[_0xed6f[40]]=function(e){var t;for(t in this[_0xed6f[63]])if(e[_0xed6f[64]](t)){if(!this[_0xed6f[67]](t,e[t]))return!1}else if(this[_0xed6f[63]][t].toString()!==_0xed6f[68])return!1;return!0},ArletRule.prototype[_0xed6f[69]]=function(e,t){for(var r,i=0;i<e.length&&!(r=e[i][_0xed6f[70]](t));i++);return r},ArletMultiPassSub.prototype.replace=function(e){for(var t=0;t<this.pairs.length;t++){var r=this.pairs[t];e=e.replace(r[_0xed6f[72]],r[_0xed6f[73]])}return e},ArletSinglePassSub.prototype.replace=function(e){var t=_0xed6f[24],r=0;for(this[_0xed6f[74]][_0xed6f[80]]=0;this[_0xed6f[74]][_0xed6f[70]](e);){for(var i=e[_0xed6f[81]](r,this[_0xed6f[74]][_0xed6f[80]]),f=0;f<this.pairs.length;f++)if(this.pairs[f][_0xed6f[72]][_0xed6f[82]](i)){i=i.replace(this.pairs[f][_0xed6f[72]],this.pairs[f][_0xed6f[73]]);break}t+=i,r=this[_0xed6f[74]][_0xed6f[80]]}return t+e[_0xed6f[81]](r)},ArletSynonymSub.prototype.replace=function(e){if(this[_0xed6f[74]][_0xed6f[82]](e))for(var t=0;t<this.pairs.length;t++){var r=this.pairs[t];e=e.replace(r[_0xed6f[72]],r[_0xed6f[73]])}return e};
